### long和double型变量的特殊规则

long和double的非原子性协定(Nonatomic Treatment of double and long Variables)：
* Java内存模型要求：8个内存操作都具有原子性
* 但是对于64位的数据类型(long和double)，在模型中特别定义了一条相对宽松的规定：
    1. 允许虚拟机将没有被volatile修饰的64位数据的读写操作，划分为2次32位的操作来进行
    2. 也就是：允许虚拟机实现，选择可以不保证64位数据类型的load、store、read和write这4个操作的原子性

##### 半个变量
* 如果有多个线程，共享一个并未声明为volatile的long或double的变量，并且同时对它们进行读取和修改操作。
* 那么：某些线程可能会读取到一个既非原值、也不是其他线程修改值的，代表了"半个变量"的数值。

##### 实际实现
* 不过，这种读取到"半个变量"的情况非常罕见(在目前商用Java虚拟机中不会出现)，
* 因为：Java内存模型虽然允许虚拟机不把long和double的读写实现成原子操作，
* 但允许、而且"强烈建议"虚拟机对此类操作在实现时提供原子性。
* 目前各种平台下的商用虚拟机几乎都选择把64位数据的读写操作，作为原子操作来对待。
* 因此：一般不需要吧用到的long和double变量专门声明为volatile。