### Java堆(Java Heap)

##### Java Heap定义
* 对大多数应用来说，Java堆是Java虚拟机所管理的内存中最大的一块。
* Java堆是被所有线程共享的一块内存区域，在虚拟机启动时创建。
* 此内存区域的唯一目的就是：存放对象实例。几乎所有的对象实例都在这里分配内存。
* 这一点，在JVM规范中的描述是：所有的对象实例以及数组都要在堆上分配
    * 但是，随着JIT编译器的发展与"逃逸分析技术"逐渐成熟，栈上分配、标量替换优化技术将会导致一些微妙的变化发生
    * 所有的对象分配在堆上也渐渐变得不是那么"绝对"了

##### GC堆

* Java堆是垃圾收集器管理的主要区域，因此很多时候也被称作"GC堆"。
* 从内存回收的角度来看，由于现在收集器基本都采用分代手机算法
    1. 所以Java堆中还可以细分为：新生代和老年代
    2. 再细致一点的有：Eden空间、From Survivor空间、To Survivor空间等
* 从内存分配的角度来看，线程共享的Java堆中可能划分出多个线程私有的分配缓冲区(Thread Local Allocation Buffer,TLAB)。
* 不过，无论如何划分，都与存放内容无关。无论哪个区域，存储的仍然是对象实例
* 进一步划分的目的是为了更好地回收内存，或者更快地分配内存

##### 其他
* 根据JVM规范的规定：Java堆可以处于物理上不连续的内存空间中，只要逻辑上是连续的即可(就像磁盘空间一样)
* 实现时，既可以实现城固定大小的，也可以是可扩展的，不过当前主流的虚拟机都是按照可扩展来实现的(通过-Xmx和-Xms控制)。
* 如果在堆中没有内存完成示例分配，并且堆也无法再扩展时，将会抛出OutOfMemoryError异常。